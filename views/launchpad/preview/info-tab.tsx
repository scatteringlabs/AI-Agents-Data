import { getTotal, subscribe } from "@/store/holder-table";
import { Box, styled } from "@mui/material";
import { useState, useSyncExternalStore } from "react";

const getServerSnapshot = getTotal;

const ButtonWrapper = styled(Box)<{ active: boolean }>(({ theme, active }) => ({
  background: active ? "#af54ff" : "rgba(255,255,255,0.0)",
  border: active ? "1px solid #af54ff" : "1px solid rgba(255,255,255,0.3)",
  color: active ? "rgba(255,255,255,1)" : "rgba(255,255,255,0.4)",
  fontWeight: active ? 700 : 500,
  borderRadius: "8px",
  padding: theme.spacing(1.25, 2.5),
  fontSize: 16,
  marginRight: theme.spacing(2),
  display: "flex",
  alignItems: "center",
  justifyContent: "center",
  fontFamily: "Poppins",
  fontStyle: "normal",
  lineHeight: "normal",
  cursor: "pointer",
}));

const InfoTab = ({
  setActiveTab,
  activeTab,
  showOverView = true,
  nftMinted = 0,
  level,
}: {
  showOverView?: boolean;
  activeTab: any;
  nftMinted?: number;
  level: number;
  setActiveTab: (a: any) => void;
}) => {
  const total = useSyncExternalStore(subscribe, getTotal, getServerSnapshot);
  return (
    <Box
      sx={{
        display: "flex",
        mb: 2,
        width: { md: "auto", xs: "calc(100vw - 20px)" },
        overflowX: "scroll",
      }}
    >
      {showOverView ? (
        <ButtonWrapper
          sx={{
            fontSize: { md: 14, xs: 9 },
            px: { md: 2, xs: 1 },
            py: { md: 1, xs: 0.4 },
            width: "auto",
            display: "flex",
          }}
          active={activeTab === "overview"}
          onClick={() => {
            setActiveTab("overview");
          }}
        >
          <Box
            sx={{
              mr: { md: 1, xs: 0.4 },
              display: { md: "block", xs: "none" },
            }}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="21"
              height="20"
              viewBox="0 0 21 20"
              fill="none"
            >
              <path
                d="M11.6627 0C11.7854 0 11.9072 0.0163636 12.0236 0.0490909C12.2436 0.0963636 12.4463 0.206364 12.6081 0.368182L18.3136 6.07364C18.4772 6.23727 18.5827 6.43727 18.6308 6.64636C18.6645 6.76727 18.6818 6.89182 18.6818 7.01909V17.2727C18.6818 17.996 18.3944 18.6897 17.883 19.2012C17.3715 19.7127 16.6778 20 15.9545 20H5.04539C4.32207 20 3.62838 19.7127 3.11691 19.2012C2.60545 18.6897 2.31812 17.996 2.31812 17.2727V2.72727C2.31812 2.00396 2.60545 1.31026 3.11691 0.7988C3.62838 0.287337 4.32207 0 5.04539 0L11.6627 0ZM10.5908 1.81818H5.04539C4.80863 1.81809 4.58117 1.91037 4.4114 2.07539C4.24162 2.24041 4.14293 2.46515 4.1363 2.70182V17.2727C4.1362 17.5095 4.22848 17.7369 4.3935 17.9067C4.55852 18.0765 4.78327 18.1752 5.01993 18.1818H15.9545C16.1912 18.1819 16.4187 18.0896 16.5885 17.9246C16.7582 17.7596 16.8569 17.5348 16.8636 17.2982V8.09091H12.8636C12.2866 8.091 11.7311 7.87161 11.3099 7.47724C10.8887 7.08287 10.6332 6.54305 10.5954 5.96727L10.5908 5.81818V1.81818ZM14.1363 13.5591C14.368 13.5593 14.5909 13.6481 14.7594 13.8071C14.9278 13.9662 15.0292 14.1836 15.0428 14.4149C15.0564 14.6462 14.9811 14.874 14.8324 15.0517C14.6837 15.2294 14.4727 15.3435 14.2427 15.3709L14.1363 15.3773H6.86357C6.63186 15.377 6.40899 15.2883 6.24051 15.1292C6.07202 14.9702 5.97063 14.7528 5.95705 14.5215C5.94347 14.2901 6.01873 14.0624 6.16745 13.8847C6.31616 13.707 6.52712 13.5928 6.75721 13.5655L6.86357 13.5591H14.1363ZM14.1363 9.92273C14.368 9.92298 14.5909 10.0117 14.7594 10.1708C14.9278 10.3298 15.0292 10.5472 15.0428 10.7785C15.0564 11.0099 14.9811 11.2376 14.8324 11.4153C14.6837 11.593 14.4727 11.7072 14.2427 11.7345L14.1363 11.7409H6.86357C6.63186 11.7407 6.40899 11.6519 6.24051 11.4929C6.07202 11.3338 5.97063 11.1164 5.95705 10.8851C5.94347 10.6538 6.01873 10.426 6.16745 10.2483C6.31616 10.0707 6.52712 9.95646 6.75721 9.92909L6.86357 9.92273H14.1363ZM8.03266 6.28636C8.26429 6.28685 8.487 6.37573 8.65532 6.53487C8.82363 6.69401 8.92485 6.91139 8.93831 7.14263C8.95177 7.37387 8.87645 7.60153 8.72774 7.77912C8.57902 7.9567 8.36813 8.07083 8.13811 8.09818L8.03266 8.10455H6.86357C6.63186 8.10429 6.40899 8.01556 6.24051 7.8565C6.07202 7.69744 5.97063 7.48004 5.95705 7.24873C5.94347 7.01742 6.01873 6.78966 6.16745 6.61197C6.31616 6.43429 6.52712 6.32009 6.75721 6.29273L6.86357 6.28636H8.03266ZM12.409 2.75455V5.81818C12.4089 5.93535 12.454 6.04803 12.535 6.13272C12.616 6.21742 12.7265 6.26757 12.8436 6.27273L15.9281 6.27182L12.409 2.75364V2.75455Z"
                fill={
                  activeTab === "overview" ? "#fff" : "rgba(255,255,255,0.3)"
                }
              />
            </svg>
          </Box>
          Overview
        </ButtonWrapper>
      ) : null}
      <ButtonWrapper
        sx={{
          fontSize: { md: 14, xs: 9 },
          px: { md: 2, xs: 1 },
          py: { md: 1, xs: 0.4 },
          width: "auto",
          display: "flex",
          mr: { md: 2, xs: 0.6 },
        }}
        active={activeTab === "trade"}
        onClick={() => {
          setActiveTab("trade");
        }}
      >
        <Box
          sx={{ mr: { md: 1, xs: 0.4 }, display: { md: "block", xs: "none" } }}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
          >
            <path
              d="M15.653 3.56664L17.0224 1.90625L17.9868 2.70162L16.6173 4.36201L15.653 3.56664ZM13.977 9.37883H13.6496L11.2766 8.57121L11.6793 7.38781L13.8565 8.12883H13.977V9.37883ZM8.24477 13.3177L5.81469 10.9415L6.08012 10.6702L5.63402 10.2314L6.24301 9.61223L9.11859 12.4239L8.24477 13.3177ZM1.9082 17.481L3.19803 15.0415L4.30303 15.6258L3.01318 18.0652L1.9082 17.481Z"
              fill={activeTab === "trade" ? "#fff" : "rgba(255,255,255,0.3)"}
            />
            <path
              d="M6.85586 16.866H3.10547V9.17617H6.85586V16.866ZM4.35547 15.616H5.60586V10.4262H4.35547V15.616ZM16.9146 13.125H13.1447V3.03125H16.9146V13.125ZM14.3947 11.875H15.6646V4.28125H14.3947V11.875ZM11.8061 16.866H8.05547V3.12148H11.8059V16.866H11.8061ZM9.30547 15.616H10.5559V4.37148H9.30547V15.616Z"
              fill={activeTab === "trade" ? "#fff" : "rgba(255,255,255,0.3)"}
            />
            <path
              d="M4.64062 7.84434H5.34375V9.99805H4.64062V7.84434ZM4.64062 16.2258H5.34375V18.1359H4.64062V16.2258ZM9.6498 16.2258H10.3529V18.1359H9.6498V16.2258ZM9.6498 1.91016H10.3529V3.82031H9.6498V1.91016ZM14.6467 1.91016H15.3498V3.82031H14.6467V1.91016ZM14.6467 12.4984H15.3498V14.4086H14.6467V12.4984Z"
              fill={activeTab === "trade" ? "#fff" : "rgba(255,255,255,0.3)"}
            />
          </svg>
        </Box>
        Transactions
      </ButtonWrapper>
      <ButtonWrapper
        sx={{
          fontSize: { md: 14, xs: 9 },
          px: { md: 2, xs: 1 },
          py: { md: 1, xs: 0.4 },
          width: "auto",
          display: "flex",
          mr: { md: 2, xs: 0.6 },
        }}
        active={activeTab === "holder"}
        onClick={() => {
          setActiveTab("holder");
        }}
      >
        <Box
          sx={{ mr: { md: 1, xs: 0.4 }, display: { md: "block", xs: "none" } }}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="21"
            height="20"
            viewBox="0 0 21 20"
            fill="none"
          >
            <path
              d="M18.6641 17.5781C18.9877 17.5781 19.25 17.8404 19.25 18.1641C19.25 18.4877 18.9877 18.75 18.6641 18.75H2.33594C2.01232 18.75 1.75 18.4877 1.75 18.1641C1.75 17.8404 2.01232 17.5781 2.33594 17.5781H18.6641ZM12.8438 1.25C13.491 1.25 14.0156 1.77467 14.0156 2.42188V15.8203C14.0156 16.4675 13.491 16.9922 12.8438 16.9922H8.15625C7.50904 16.9922 6.98438 16.4675 6.98438 15.8203V2.42188C6.98438 1.77467 7.50904 1.25 8.15625 1.25H12.8438ZM5.85156 4.29688C6.17518 4.29688 6.4375 4.5592 6.4375 4.88281C6.4375 5.20318 6.18039 5.4635 5.86125 5.46867L5.85156 5.46875H2.92188V15.8203H5.85156C6.17518 15.8203 6.4375 16.0826 6.4375 16.4062C6.4375 16.7266 6.18039 16.9869 5.86125 16.9922H2.92188C2.28113 16.9922 1.76051 16.478 1.75016 15.8397L1.75 15.8203V5.46875C1.75 4.82801 2.26422 4.30738 2.9025 4.29703L2.92188 4.29688H5.85156ZM18.0781 7.16797L18.0975 7.16813C18.7358 7.17848 19.25 7.6991 19.25 8.33984V15.8203L19.2498 15.8397C19.2395 16.478 18.7189 16.9922 18.0781 16.9922H15.1388C14.8196 16.9869 14.5625 16.7266 14.5625 16.4062C14.5625 16.0826 14.8248 15.8203 15.1484 15.8203H18.0781V8.33984H15.1484L15.1388 8.33977C14.8196 8.33459 14.5625 8.07428 14.5625 7.75391C14.5625 7.43029 14.8248 7.16797 15.1484 7.16797H18.0781ZM12.8438 2.42188H8.15625V15.8203H12.8438V2.42188ZM16.1855 9.32422C16.7871 9.32422 17.1816 9.60547 17.1816 10.125C17.1816 10.4141 17.0254 10.6406 16.7129 10.7656V10.7852C17.0371 10.8828 17.2754 11.1172 17.2754 11.4922C17.2754 12.0352 16.7793 12.3398 16.2012 12.3398C15.7402 12.3398 15.416 12.1797 15.2051 11.9336L15.5254 11.4961C15.7012 11.6641 15.9043 11.7773 16.1309 11.7773C16.4004 11.7773 16.5762 11.6641 16.5762 11.4453C16.5762 11.1953 16.4434 11.0469 15.834 11.0469V10.5586C16.3301 10.5586 16.4863 10.4062 16.4863 10.1758C16.4863 9.97656 16.3691 9.86719 16.1543 9.86719C15.959 9.86719 15.8105 9.95703 15.6348 10.1094L15.2832 9.68359C15.5527 9.45703 15.8418 9.32422 16.1855 9.32422ZM4.7207 6.43359C5.2832 6.43359 5.67383 6.79297 5.67383 7.34766C5.67383 7.84766 5.24414 8.39844 4.79883 8.84766C4.94336 8.82812 5.14258 8.80859 5.27148 8.80859H5.80664V9.39453H3.79102V8.99609C4.51758 8.33594 5.00586 7.80859 5.00586 7.38672C5.00586 7.12109 4.85742 6.97656 4.62695 6.97656C4.42773 6.97656 4.27148 7.10938 4.13477 7.25781L3.75586 6.88281C4.04102 6.58203 4.30664 6.43359 4.7207 6.43359ZM10.9277 3.46094V5.80469H11.4512V6.36719H9.61523V5.80469H10.2324V4.15234H9.69727V3.72266C10.0098 3.66406 10.2129 3.58594 10.416 3.46094H10.9277Z"
              fill={activeTab === "holder" ? "#fff" : "rgba(255,255,255,0.3)"}
            />
          </svg>
        </Box>
        Top Holders ({total})
      </ButtonWrapper>
      <ButtonWrapper
        sx={{
          fontSize: { md: 14, xs: 9 },
          px: { md: 2, xs: 1 },
          py: { md: 1, xs: 0.4 },
          width: "auto",
          display: "flex",
          mr: { md: 2, xs: 0.6 },
        }}
        active={activeTab === "nft"}
        onClick={() => {
          setActiveTab("nft");
        }}
      >
        <Box
          sx={{ mr: { md: 1, xs: 0.4 }, display: { md: "block", xs: "none" } }}
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="20"
            height="20"
            viewBox="0 0 20 20"
            fill="none"
          >
            <g opacity="0.6">
              <path
                d="M7.49992 9.9987C7.94195 9.9987 8.36587 9.8231 8.67843 9.51054C8.99099 9.19798 9.16659 8.77406 9.16659 8.33203C9.16659 7.89 8.99099 7.46608 8.67843 7.15352C8.36587 6.84096 7.94195 6.66537 7.49992 6.66537C7.05789 6.66537 6.63397 6.84096 6.32141 7.15352C6.00885 7.46608 5.83325 7.89 5.83325 8.33203C5.83325 8.77406 6.00885 9.19798 6.32141 9.51054C6.63397 9.8231 7.05789 9.9987 7.49992 9.9987ZM17.9166 5.41536L9.99992 0.832031L2.08325 5.41536V14.582L9.99992 19.1654L17.9166 14.582V5.41536ZM9.99992 2.75786L16.2499 6.3762V12.1095L12.4483 9.82953L5.80575 14.8112L3.74992 13.6212V6.3762L9.99992 2.75786ZM9.99992 17.2395L7.37325 15.7187L12.5516 11.8354L15.8833 13.8337L9.99992 17.2395Z"
                fill={activeTab === "nft" ? "#fff" : "rgba(255,255,255,0.3)"}
              />
            </g>
          </svg>
        </Box>
        NFTs Minted ({nftMinted})
      </ButtonWrapper>
      {level === 1 ? (
        <ButtonWrapper
          sx={{
            fontSize: { md: 14, xs: 9 },
            px: { md: 2, xs: 1 },
            py: { md: 1, xs: 0.4 },
            width: "auto",
            display: "flex",
          }}
          active={activeTab === "wallet"}
          onClick={() => {
            setActiveTab("wallet");
          }}
        >
          <Box
            sx={{
              mr: { md: 1, xs: 0.4 },
              display: { md: "block", xs: "none" },
            }}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="21"
              height="20"
              viewBox="0 0 21 20"
              fill="none"
            >
              <g opacity="0.6" clip-path="url(#clip0_6186_22439)">
                <path
                  d="M16.8636 0H4.13636C2.13636 0 0.5 1.63636 0.5 3.63636V16.3636C0.5 18.3636 2.13636 20 4.13636 20H16.8636C18.8636 20 20.5 18.3636 20.5 16.3636V3.63636C20.5 1.63636 18.8636 0 16.8636 0ZM18.6818 12.7273H14.1364C12.6364 12.7273 11.4091 11.5 11.4091 10C11.4091 8.5 12.6364 7.27273 14.1364 7.27273H18.6818V12.7273ZM14.1364 5.45455C11.6364 5.45455 9.59091 7.5 9.59091 10C9.59091 12.5 11.6364 14.5455 14.1364 14.5455H18.6818V16.3636C18.6818 17.3636 17.8636 18.1818 16.8636 18.1818H4.13636C3.13636 18.1818 2.31818 17.3636 2.31818 16.3636V3.63636C2.31818 2.63636 3.13636 1.81818 4.13636 1.81818H16.8636C17.8636 1.81818 18.6818 2.63636 18.6818 3.63636V5.45455H14.1364Z"
                  fill={
                    activeTab === "wallet" ? "#fff" : "rgba(255,255,255,0.3)"
                  }
                />
                <path
                  d="M12.7727 10.0004C12.7727 10.362 12.9164 10.7089 13.1721 10.9646C13.4278 11.2203 13.7747 11.364 14.1363 11.364C14.498 11.364 14.8448 11.2203 15.1006 10.9646C15.3563 10.7089 15.5 10.362 15.5 10.0004C15.5 9.6387 15.3563 9.29185 15.1006 9.03612C14.8448 8.78039 14.498 8.63672 14.1363 8.63672C13.7747 8.63672 13.4278 8.78039 13.1721 9.03612C12.9164 9.29185 12.7727 9.6387 12.7727 10.0004Z"
                  fill={
                    activeTab === "wallet" ? "#fff" : "rgba(255,255,255,0.3)"
                  }
                />
              </g>
              <defs>
                <clipPath id="clip0_6186_22439">
                  <rect
                    width="20"
                    height="20"
                    fill={
                      activeTab === "wallet" ? "#fff" : "rgba(255,255,255,0.3)"
                    }
                    transform="translate(0.5)"
                  />
                </clipPath>
              </defs>
            </svg>
          </Box>
          My wallet
        </ButtonWrapper>
      ) : null}
    </Box>
  );
};

export default InfoTab;
